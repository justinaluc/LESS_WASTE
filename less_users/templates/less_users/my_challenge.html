{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}
- my challenge details
{% endblock title %}

{% block content %}
<h1>Hey, {{ user.username }}!</h1>
<p>How about knowing more about this challenge?</p>
<div class="row align-items">
    <div class="container-fluid mt-2">
        <div class="col col-6 d-inline-flex align-items">
            <div class="card col d-inline-flex">
                <div class="card-header text h4">
                    {{ object.challenge }}
                </div>
                <div class="card-body">
                    {{ object.challenge.description }}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row align-items-end mt-4">
    <p>You activated this challenge on <b>{{object.start_date.date}}</b></p>
    <p>It should take you <b>{{object.challenge.duration}} days</b> to complete it.</p>
    <p>You can get points every <b>{{object.challenge.frequency}} days</b>.</p>
    {% if date_next %}
    <p>Last time you got the points for this challenge was on <b>{{last_log}}</b>.</p>
    <p>If it is <b>{{date_now}}</b> now, it means you have to wait until <b>{{date_next}}</b>
        to get next <b>{{object.challenge.points}} point/s</b>.</p>
    {% else %}
    <p>If it is <b>{{date_now}}</b> now, it means you can get <b>{{object.challenge.points}} point/s</b> right now.</p>
    {% endif %}
    <p>You have <b>{{days_left}}</b> days left. You will either complete this challenge or it will expire on
        <b>{{date_end}}</b>.</p>

</div>

<div class="row align-items-end">
    {% if object.is_active %}
    <div class="container-fluid mt-2">
        <form action="{% url 'event'%}" method="POST" class="d-inline-block float-md-end">
            {% csrf_token %}
            <button class="btn btn-outline-dark disabled">{{ object.challenge.points }}</button>
            <button class="btn btn-success" type="submit" name="done" value="{{object.challenge.id}}">Done!</button>
            <button class="btn btn-secondary" type="submit" name="stop" value="{{object.id}}">Stop</button>
            <button class="btn btn-warning" type="submit" name="delete" value="{{object.id}}">Delete</button>
        </form>
    </div>
    {% else %}
    <div class="container-fluid mt-2">
        <form action="{% url 'event'%}" method="POST" class="d-inline-block float-md-end">
            {% csrf_token %}
            <button class="btn btn-outline-dark disabled">{{ object.challenge.points }}</button>
            <button class="btn btn-warning" type="submit" name="delete" value="{{object.id}}">Delete</button>
        </form>
    </div>
    {% endif %}
</div>

{% endblock content %}
